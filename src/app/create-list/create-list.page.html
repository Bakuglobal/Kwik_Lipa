<ion-content>
  <ion-toolbar>
    <ion-buttons padding>
      <ion-icon name="arrow-back" slot="start" (click)="back()"></ion-icon>
    </ion-buttons>
    <ion-title text-center color="primary">New Shopping List</ion-title>
  </ion-toolbar>

  <form ngform="listForm">
    <div padding>
      <ion-label>Add a list Title <span style="color: red;">*</span></ion-label>
    </div>
    <ion-item>
      <ion-input name="title" type="text" placeholder="Enter a title for the list" [(ngModel)]="title" required>
      </ion-input>
    </ion-item>
    <div padding>
      <ion-label>Set Shopping Date </ion-label>
    </div>
    <ion-item>
      <ion-input type="date" min="Date()" name="DueDate" [(ngModel)]="DueDate"></ion-input>
    </ion-item>
    <div padding>
      <ion-label>Share List with </ion-label>
    </div>
    <ion-item *ngIf="Listmembers.length > 0">
      <ion-chip *ngFor="let item of Listmembers">
        <!-- <ion-avatar><img src="{{item.image}}"></ion-avatar> -->
        <ion-label>{{item.firstName}}&nbsp;{{item.lastName}}</ion-label>
        <ion-label>{{item.phone}}</ion-label>
      </ion-chip>
    </ion-item>
    <ion-item>
      <ion-input name="member" placeholder="Enter phone number" [(ngModel)]="member" type="phone"
        (ionChange)="suggestUsers()"></ion-input>
      <ion-icon name="people" slot="end" color="primary" (click)="contactList()"></ion-icon>
    </ion-item>
    <div *ngIf="userSuggestion">
      <ion-row padding>
        <ion-icon name="close" size="large" (click)="closeSuggestion()"></ion-icon>
      </ion-row><br>
      <ion-row>
        <ion-chip *ngFor="let item of users" (click)="addMembers(item); userSuggestion = false">
          <!-- <ion-avatar><ion-icon name="person"></ion-icon></ion-avatar> -->
          <ion-label>{{item.firstName}}&nbsp;{{item.lastName}}</ion-label>
          <ion-label>{{item.phone}}</ion-label>
          <ion-icon name="close" (click)="removeMember(item)"></ion-icon>
        </ion-chip>
      </ion-row>
    </div>
    <div style="text-align: center;" *ngIf="showInvite">
      <ion-row>
        <ion-label>No user record with this phone number <br>
          <ion-label color="primary" (click)="sendInvite()">Send invite to {{name}} &nbsp; {{member}}</ion-label>
        </ion-label>
      </ion-row>
    </div>

  </form>
  <div padding>
    <ion-label>Add items <span style="color: red;">*</span></ion-label>
  </div>
  <ion-item>
    <ion-input type="text" name="item" placeholder="what do you want to buy ?" (ionChange)="searchItem()"
      [(ngModel)]="searchTerm"></ion-input>
  </ion-item>
  <div *ngIf="suggestion" style="background-color: var(--ion-color-light);">
    <ion-item *ngFor="let item of items" text-center padding (click)="addItem(item)">
      <ion-col>
        <ion-avatar><img src="{{item.image}}"></ion-avatar>
      </ion-col>
      <ion-col>
        {{item.item}}
      </ion-col>
    </ion-item>
  </div>
  <div *ngIf="newListItems.length > 0" style="margin-top: 15px;">
    <ion-item>
      <ion-col>
        <ion-label >Icon</ion-label>
      </ion-col>
      <ion-col>
        <ion-label >Items</ion-label>
      </ion-col>
      <ion-col>
        <ion-label >Budget</ion-label>
      </ion-col>
      <ion-col>
        <ion-label >Quantity</ion-label>
      </ion-col>
    </ion-item>
    <ion-item-sliding *ngFor="let item of newListItems">
      <!-- <ion-item> -->
        <ion-card  class="card">
          <ion-item>
            <ion-col size="3">
              <ion-avatar>
                <img src="{{item.image}}">
              </ion-avatar>
            </ion-col>
            <ion-col>
              <ion-label>{{item.item}}</ion-label>
            </ion-col>
            <ion-col>
              <ion-input name="price" type="number" value="{{item.price}}"></ion-input>
            </ion-col>
            <ion-col size="4" text-center>
              <ion-card style="border-radius: 20px;width: 100%;margin-right:5px">
                <ion-item no-padding>
                  <ion-col >
                    <ion-icon name="remove" (click)="reduce(newListItems.indexOf(item))"></ion-icon>
                  </ion-col>&nbsp;
                  <ion-col padding>
                    <ion-label><b>{{item.count}}</b></ion-label>
                  </ion-col>
                  <ion-col>
                    <ion-icon name="add" (click)="add(newListItems.indexOf(item))"></ion-icon>
                  </ion-col>
                </ion-item>
              </ion-card>
            </ion-col>
          </ion-item>
        </ion-card>
      <!-- </ion-item> -->
      <ion-item-options side="end">
        <ion-item-option (click)="remove(newListItems.indexOf(item))" color="primary">
          <ion-icon name="trash" slot="end" color="danger"></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </div>

</ion-content>
<ion-footer>
  <ion-row>
    <ion-col padding size="3" (click)="clearList()" text-center>
      <!-- <ion-card padding style="border-radius: 15px;" > -->
      <ion-icon name="trash" size="large" color="primary"></ion-icon><br>
      Clear List
      <!-- </ion-card> -->
    </ion-col>
    <ion-col>
      <ion-card padding style="border-radius: 15px;text-align: center;" color="danger" (click)="saveList()" [disabled]="newListItems.length == 0">
        Create List
      </ion-card>
    </ion-col>
  </ion-row>
</ion-footer>