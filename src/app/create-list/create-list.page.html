<ion-content>
  <ion-toolbar>
    <ion-buttons padding>
      <ion-icon name="arrow-back" slot="start" (click)="back()"></ion-icon>
    </ion-buttons>
    <ion-title text-center color="primary">New Shopping List</ion-title>
  </ion-toolbar>

  <form [formGroup]="listForm">
    <div padding>
      <ion-label>Add a list name <span style="color: red;">*</span></ion-label>
    </div>
    <ion-item>
      <ion-input type="text" placeholder="Enter a title for the list" formControlName="title" required></ion-input>
    </ion-item>
    <div padding>
      <ion-label>Set Due Date </ion-label>
    </div>
    <ion-item>
      <ion-input type="date" min="Date()" formControlName="DueDate"></ion-input>
    </ion-item>
    <div padding>
      <ion-label>Add members to this list </ion-label>
    </div>
    <ion-item>
      <ion-input name="member" formControlName="member" type="phone" (ionChange)="suggestUsers(member)"></ion-input>
      <ion-row *ngIf="Listmembers.length > 0">
      <ion-chip *ngFor="let item of Listmembers">
        <ion-avatar><img src="{{item.image}}"></ion-avatar>
        <ion-label>{{item.name}}</ion-label>
        <ion-icon name="close" (click)="removeMember(item)"></ion-icon>
      </ion-chip>
    </ion-row>
      <!-- <ion-icon name="people" slot="end" color="primary" (click)="showMembers = true"></ion-icon> -->
    </ion-item>
    <div *ngIf="showMembers">
      <ion-item *ngFor="let item of members" (click)="addMembers(item)">
        <ion-chip >
          <ion-avatar><img src="{{item.image}}"></ion-avatar>
          <ion-label>{{item.name}}</ion-label>
          <ion-lbel>{{item.phone}}</ion-lbel>
        </ion-chip>
      </ion-item>
    </div>
  </form>
    <div padding>
      <ion-label>Add items <span style="color: red;">*</span></ion-label>
    </div>
    <ion-item>
      <ion-input type="text" name="item" placeholder="what do you want to buy ?" (ionChange)="searchItem()"
        [(ngModel)]="searchTerm"></ion-input>
    </ion-item>
    <div *ngIf="suggestion">
      <ion-item *ngFor="let item of items" text-center padding (click)="addItem(item)">
        <ion-col>
          <ion-avatar><img src="{{item.image}}"></ion-avatar>
        </ion-col>
        <ion-col>
          {{item.item}}
        </ion-col>
      </ion-item>
    </div>
    <div *ngIf="newListItems.length > 0" style="margin-top: 15px;">
      <ion-card *ngFor="let item of newListItems">
        <ion-item>
          <ion-col size="3">
            <ion-avatar>
              <img src="{{item.image}}">
            </ion-avatar>
          </ion-col>
          <ion-col>
            <ion-label>{{item.item}}</ion-label>
          </ion-col>
          <ion-col size="4" text-center>
            <ion-card style="border-radius: 20px;width: 98%;">
              <ion-item no-padding>
                <ion-col>
                  <ion-icon name="remove" (click)="reduce(newListItems.indexOf(item))"></ion-icon>
                </ion-col>&nbsp;
                <ion-col>
                  <ion-label><b>{{item.count}}</b></ion-label>
                </ion-col>
                <ion-col>
                  <ion-icon name="add" (click)="add(newListItems.indexOf(item))"></ion-icon>
                </ion-col>
              </ion-item>
            </ion-card>
          </ion-col>
        </ion-item>
      </ion-card>
    </div>

</ion-content>
<ion-footer>
  <ion-row>
    <ion-col padding size="3" (click)="clearList()"text-center>
      <!-- <ion-card padding style="border-radius: 15px;" > -->
      <ion-icon name="trash" size="large" color="primary"></ion-icon><br>
      Clear List
      <!-- </ion-card> -->
    </ion-col>
    <ion-col>
      <ion-card padding style="border-radius: 15px;text-align: center;" color="danger" (click)="saveList()" [disabled]="!listForm.valid">
        Create List
      </ion-card>
    </ion-col>
  </ion-row>
</ion-footer>