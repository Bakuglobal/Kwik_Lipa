<ion-header style="background-color: #3880ff">
  <ion-toolbar color="primary" >
      <ion-buttons slot="start">
          <ion-button (click)="back()">
            <ion-icon name="arrow-round-back"></ion-icon>
            
          </ion-button>
      </ion-buttons>
      <ion-buttons slot="end">
        <ion-button (click)="sendCart()" >
          <ion-icon size="large" name="cart"></ion-icon>
          <ion-badge color="light">{{db.getCartCount()}}</ion-badge>
        </ion-button>
      </ion-buttons>
    <ion-title class="shopname">{{shopSelected}}</ion-title>
   
  </ion-toolbar>
 
</ion-header>

<ion-content >
  
    <ion-item class="top">
      <span *ngIf="!showSearch" style="font-size: 13px;text-align: center;">Pick Pay and Collect</span>
      <ion-searchbar placeholder="Enter product name" *ngIf="showSearch" [(ngModel)]="searchTerm" (ionChange)="setFilteredItems()"></ion-searchbar>
      <ion-icon name="search" slot="end" (click)="showSearchBar()"></ion-icon>
    </ion-item>

   

    <div style="text-align: center;margin-top: 40%; margin-left: 10px; margin-right: 20px; font-size: 13px;" *ngIf="offers.length == 0" >
      <ion-label>Sorry</ion-label><br>
      <ion-label>This shop does not offer the Pick pay and collect service</ion-label>
    </div>

<!-- show spinner when loading product on offers -->

    <div class="loader" *ngIf="offers.length == 0 && shopSelected == 'Kakila Organic'">
      <ion-spinner name="lines" color="primary"></ion-spinner>
    </div>

<!-- Display a list of products on offer -->

    <!-- FEATURED PRODUCTS -->
    <div class="featured-products" *ngIf="offers.length > 0">
      
      <div class="featured-products-content" >
          <ion-row >
              <!-- FIRST ROW OF PRODUCTS -->
              <ion-col class="featured-products-content-card" size="6" *ngFor="let item of offers" [ngClass]="{'soldout': item.stock == 0}">
                  <div class="featured-products-content-card-image">
                    <div *ngIf="item.stock == 0" class="soldTag">
                      <ion-label color="danger"> SOLD OUT </ion-label>
                  </div>
                      <img src="{{item.image}}" (click)="viewProduct(item)">
                  </div>
                  <div class="featured-products-content-card-content">
                      <div class="featured-products-content-card-content-title"padding>{{item.product}} {{item.quantity}}</div>
                      <ion-row class="featured-products-content-card-content-description" padding>
                          <ion-col size="">Ksh {{item.currentprice}}</ion-col>
                      </ion-row>
                      <ion-row style="width: 100%;">
                        <ion-col size="12">
                          <ion-button expand="full" (click)="addToCart(item)" [disabled]="item.stock == 0">Add to cart</ion-button>
                        </ion-col>
                      </ion-row>
                  </div>
              </ion-col>
          </ion-row>
      </div>
  </div>
  <!-- END OF FEATURED PRODUCTS -->

</ion-content>
